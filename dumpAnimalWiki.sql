CREATE TABLE animal ( animal_id CHARACTER VARYING(255) NOT NULL, descricaoinformal CHARACTER VARYING(1000), nomeinformal CHARACTER VARYING(255), reino_id CHARACTER VARYING(255), filo_id CHARACTER VARYING(255), subfilo_id CHARACTER VARYING(255), classe_id CHARACTER VARYING(255), subclasse_id CHARACTER VARYING(255), ordem_id CHARACTER VARYING(255), subordem_id CHARACTER VARYING(255), familia_id CHARACTER VARYING(255), subfamilia_id CHARACTER VARYING(255), genero_id CHARACTER VARYING(255), subgenero_id CHARACTER VARYING(255), especie_id CHARACTER VARYING(255), subespecie_id CHARACTER VARYING(255), PRIMARY KEY (animal_id) );
CREATE TABLE classe ( classe_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (classe_id) );
CREATE TABLE comentario ( comentario_id CHARACTER VARYING(255) NOT NULL, usuario_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (comentario_id) );
CREATE TABLE definicao ( definicao_id CHARACTER VARYING(255) NOT NULL, avaliacao CHARACTER VARYING(255), animal_id CHARACTER VARYING(255) NOT NULL, contador_likes INTEGER, contador_dislikes INTEGER, PRIMARY KEY (definicao_id) );
CREATE TABLE especie ( especie_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (especie_id) );
CREATE TABLE estado ( estado_id CHARACTER VARYING(255) NOT NULL, codigo CHARACTER VARYING(2) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (estado_id) );
CREATE TABLE familia ( familia_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (familia_id) );
CREATE TABLE filo ( filo_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (filo_id) );
CREATE TABLE foto ( foto_id CHARACTER VARYING(255) NOT NULL, localizacao_id CHARACTER VARYING(255) NOT NULL, animal_id CHARACTER VARYING(255), foto BYTEA NOT NULL, data DATE, datasubmissao DATE NOT NULL, usuario_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (foto_id) );
CREATE TABLE fotos_indefinidas ( foto_indefinida_id CHARACTER VARYING(255) NOT NULL, foto_id CHARACTER VARYING(255) NOT NULL, ultima_atualizacao DATE NOT NULL, PRIMARY KEY (foto_indefinida_id) );
CREATE TABLE genero ( genero_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (genero_id) );
CREATE TABLE localizacao ( localizacao_id CHARACTER VARYING(255) NOT NULL, complemento CHARACTER VARYING(255), comentario CHARACTER VARYING(255), estado_id CHARACTER VARYING(255) NOT NULL, municipio_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (localizacao_id) );
CREATE TABLE municipio ( municipio_id CHARACTER VARYING(255) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, estado_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (municipio_id) );
CREATE TABLE ordem ( ordem_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (ordem_id) );
CREATE TABLE postagem ( postagem_id CHARACTER VARYING(255) NOT NULL, comentario CHARACTER VARYING(1000), foto_id CHARACTER VARYING(255) NOT NULL, usuario_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (postagem_id) );
CREATE TABLE postagem_comentario ( postagem_id CHARACTER VARYING(255) NOT NULL, comentario_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (postagem_id, comentario_id) );
CREATE TABLE postagem_definicao ( postagem_id CHARACTER VARYING(255) NOT NULL, definicao_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (postagem_id, definicao_id) );
CREATE TABLE reino ( reino_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (reino_id) );
CREATE TABLE subclasse ( subclasse_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, classe_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (subclasse_id) );
CREATE TABLE subespecie ( subespecie_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, especie_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (subespecie_id) );
CREATE TABLE subfamilia ( subfamilia_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, familia_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (subfamilia_id) );
CREATE TABLE subfilo ( subfilo_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, filo_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (subfilo_id) );
CREATE TABLE subgenero ( subgenero_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, genero_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (subgenero_id) );
CREATE TABLE subordem ( subordem_id CHARACTER VARYING(255) NOT NULL, descricao CHARACTER VARYING(1000) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, ordem_id CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (subordem_id) );
CREATE TABLE usuario ( usuario_id CHARACTER VARYING(255) NOT NULL, cpf CHARACTER VARYING(20) NOT NULL, senha CHARACTER VARYING(10) NOT NULL, email CHARACTER VARYING(255) NOT NULL, nome CHARACTER VARYING(255) NOT NULL, PRIMARY KEY (usuario_id) );
CREATE TABLE mapa_ocorrencias ( animal VARCHAR(255) NOT NULL, estado VARCHAR(255) NOT NULL, municipio VARCHAR(255) NOT NULL, quantidadeAnimal int, PRIMARY KEY (animal,municipio,estado) );
ALTER TABLE animal ADD CONSTRAINT animal_reino FOREIGN KEY (reino_id) REFERENCES reino (reino_id);
ALTER TABLE animal ADD CONSTRAINT animal_filo FOREIGN KEY (filo_id) REFERENCES filo (filo_id);
ALTER TABLE animal ADD CONSTRAINT animal_subfilo FOREIGN KEY (subfilo_id) REFERENCES subfilo (subfilo_id);
ALTER TABLE animal ADD CONSTRAINT animal_classe FOREIGN KEY (classe_id) REFERENCES classe (classe_id);
ALTER TABLE animal ADD CONSTRAINT animal_subclasse FOREIGN KEY (subclasse_id) REFERENCES subclasse (subclasse_id);
ALTER TABLE animal ADD CONSTRAINT animal_ordem FOREIGN KEY (ordem_id) REFERENCES ordem (ordem_id);
ALTER TABLE animal ADD CONSTRAINT animal_subordem FOREIGN KEY (subordem_id) REFERENCES subordem (subordem_id);
ALTER TABLE animal ADD CONSTRAINT animal_familia FOREIGN KEY (familia_id) REFERENCES familia (familia_id);
ALTER TABLE animal ADD CONSTRAINT animal_subfamilia FOREIGN KEY (subfamilia_id) REFERENCES subfamilia (subfamilia_id);
ALTER TABLE animal ADD CONSTRAINT animal_genero FOREIGN KEY (genero_id) REFERENCES genero (genero_id);
ALTER TABLE animal ADD CONSTRAINT animal_subgenero FOREIGN KEY (subgenero_id) REFERENCES subgenero (subgenero_id);
ALTER TABLE animal ADD CONSTRAINT animal_especie FOREIGN KEY (especie_id) REFERENCES especie (especie_id);
ALTER TABLE animal ADD CONSTRAINT animal_subespecie FOREIGN KEY (subespecie_id) REFERENCES subespecie (subespecie_id);
ALTER TABLE comentario ADD CONSTRAINT fkusuario_comentario FOREIGN KEY (usuario_id) REFERENCES usuario (usuario_id);
ALTER TABLE definicao ADD CONSTRAINT fkanimal_definicao FOREIGN KEY (animal_id) REFERENCES animal (animal_id);
ALTER TABLE foto ADD CONSTRAINT fkanimal_foto FOREIGN KEY (animal_id) REFERENCES animal (animal_id);
ALTER TABLE foto ADD CONSTRAINT foto_usuario FOREIGN KEY (usuario_id) REFERENCES usuario (usuario_id);
ALTER TABLE foto ADD CONSTRAINT fkfoto_localizacao FOREIGN KEY (localizacao_id) REFERENCES localizacao (localizacao_id);
ALTER TABLE fotos_indefinidas ADD CONSTRAINT fotoindefinida_foto FOREIGN KEY (foto_id) REFERENCES foto (foto_id);
ALTER TABLE localizacao ADD CONSTRAINT fk_localizacao_estado FOREIGN KEY (estado_id) REFERENCES estado (estado_id);
ALTER TABLE localizacao ADD CONSTRAINT fk_localizacao_municipio FOREIGN KEY (municipio_id) REFERENCES municipio (municipio_id);
ALTER TABLE municipio ADD CONSTRAINT fk_estado_municipio FOREIGN KEY (estado_id) REFERENCES estado (estado_id);
ALTER TABLE postagem ADD CONSTRAINT fkusuario_postagem FOREIGN KEY (usuario_id) REFERENCES usuario (usuario_id);
ALTER TABLE postagem ADD CONSTRAINT fkfoto_postagem FOREIGN KEY (foto_id) REFERENCES foto (foto_id);
ALTER TABLE postagem_definicao ADD CONSTRAINT fkpostagemdefinicao_postagem FOREIGN KEY (postagem_id ) REFERENCES postagem (postagem_id);
ALTER TABLE postagem_definicao ADD CONSTRAINT fkpostagemdefinicao_definicao FOREIGN KEY (definicao_id) REFERENCES definicao (definicao_id);
ALTER TABLE subclasse ADD CONSTRAINT subclasse_classe FOREIGN KEY (classe_id) REFERENCES classe (classe_id);
ALTER TABLE subespecie ADD CONSTRAINT subespecie_especie FOREIGN KEY (especie_id) REFERENCES especie (especie_id);
ALTER TABLE subfamilia ADD CONSTRAINT subfamilia_familia FOREIGN KEY (familia_id) REFERENCES familia (familia_id);
ALTER TABLE subfilo ADD CONSTRAINT subfilo_filo FOREIGN KEY (filo_id) REFERENCES filo (filo_id);
ALTER TABLE subgenero ADD CONSTRAINT subgenero_genero FOREIGN KEY (genero_id) REFERENCES genero (genero_id);
ALTER TABLE subordem ADD CONSTRAINT subordem_ordem FOREIGN KEY (ordem_id) REFERENCES ordem (ordem_id);
